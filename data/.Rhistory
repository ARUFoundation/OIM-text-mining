chisq.test(a)
xx
(length(tf)-1)*(length(tc)-1)
pchisq(xx,(length(tf)-1)*(length(tc)-1))
pchisq(xx,(length(tf)-1)*(length(tc)-1),lower.tail = F)
#pvalor
pchisq(xx,(length(tf)-1)*(length(tc)-1),lower.tail = F)
qchisq(0.95,(length(tf)-1)*(length(tc)-1))
qchisq(0.05,(length(tf)-1)*(length(tc)-1),lower.tail = F)
xx
#pvalor
pchisq(xx,(length(tf)-1)*(length(tc)-1),lower.tail = F)
?pchisq()
load("https://github.com/AlvaroLimber/EST-384/raw/master/data/eh18.Rdata")
load(url("https://github.com/AlvaroLimber/EST-384/raw/master/data/eh18.Rdata"))
load(url("https://github.com/AlvaroLimber/EST-384/raw/master/data/eh18.Rdata"))
library(knitr)
eh18p$edad<-eh18p$s02a_03>18
table(eh18p$edad)
table(eh18p$s06b_16)
d1<-table(eh18p$s06b_16,eh18p$edad)
d1
d1
colnames(t1)
colnames(d1)
colnames(d1)<-c("Menores de 18","18 o más")
d1
d1[,2]
t1<-kable(d1,caption = "Condición de actividad de personas de 18 años o más")
t1
aux<-d1[,-2]
aux<-d1[,-2]
aux
aux<-d1[,2]
aux
d1[,2]
as.table(d1[,2])
as.data.frame(d1[,2])
aux<-as.data.frame(d1[,2])
aux
aux<-as.data.frame("18 o más"=d1[,2])
aux<-as.data.frame(d1[,2])
colnames()
colnames(aux)
d2<-table(eh18p$s06a_01,eh18p$s06b_16 )
d2
d2<-table(eh18p$s06a_01,eh18p$s06b_16 )
d2
d2<-table(eh18p$s06b_16,eh18p$s06a_01)
d2
aa<-attributes(eh18p)
aa$variable.labels
aa$variable.labels
View(aa$variable.labels)
View(aa$variable.labels)
table(eh18p$ocupado)
d2<-table(eh18p$s06b_16,eh18p$ocupado)
d2
d2<-table(eh18p$s06b_16,eh18p$pext0)
d2
d2<-table(eh18p$s06b_16,eh18p$pext0)
d2
d2<-table(eh18p$s06b_16,eh18p$p0)
d2
d2
prop.table(d2,1)*100
t2<-prop.table(d2,1)*100
t2
barplot(t(d1))
barplot(t(d1))
d1
aux
barplot(aux)
barplot(as.vector(aux))
barplot(as.matrix(aux))
barplot(d1[,2])
d1
barplot(d1[,2],horiz = T)
?barplot(d1[,2],horiz = T)
barplot(d1[,2],horiz = T,axes=T)
barplot(d1[,2],horiz = T,axes=F)
barplot(d1[,2],horiz = T,axes=T)
barplot(d1[,2],horiz = T,axes=T,las=1)
barplot(d1[,2],horiz = T,axes=T,las=1)
par(mai=c(1,1,1,1))
barplot(d1[,2],horiz = T,axes=T,las=1)
par(mai=c(1,5,1,1))
barplot(d1[,2],horiz = T,axes=T,las=1)
par(mai=c(1,4,1,1))
barplot(d1[,2],horiz = T,axes=T,las=1)
barplot(d1[,2],horiz = T,axes=T,las=1,cex.names = 0.5)
par(mai=c(1,2,1,1))
barplot(d1[,2],horiz = T,axes=T,las=1,cex.names = 0.5)
par(mai=c(1,3,1,1))
barplot(d1[,2],horiz = T,axes=T,las=1,cex.names = 0.7)
barplot(d1[,2],horiz = F,las=1,cex.names = 0.7)
barplot(d1[,2],horiz = F,las=2,cex.names = 0.7)
barplot(d1[,2],horiz = T,las=1,cex.names = 0.7)
barplot(d1[,2],horiz = T,las=1,cex.names = 0.7,col="darkgreen")
d1[,2]
order(d1[,2])
?order(d1[,2])
aux3<-order(d1[,2])
aux3
aux3<-order(d1[,2])
par(mai=c(1,3,1,1))
barplot(d1[aux3,2],horiz = T,las=1,cex.names = 0.7,col="darkgreen")
barplot(1:10)
dev.off()
barplot(1:10)
?par
######################
#scrape página: buscojobs (2031 trabajos a la fecha)
bd<-data.frame(url="")
url<-"https://www.buscojobs.com.bo/ofertas/"
######################
#Proyecto: OIM
#Objetivo: Scrape a páginas web de trabajo
#Autor: Alvaro Chirino
#fechas: Abril 24, 2020
######################
rm(list=ls())
setwd("C:\\Users\\ALVARO\\Documents\\GitHub\\OIM-text-mining\\data")
######################
library(rvest)
library(foreign)
library(dplyr)
######################
#scrape página: buscojobs (2031 trabajos a la fecha)
bd<-data.frame(url="")
url<-"https://www.buscojobs.com.bo/ofertas/"
i<-1
url2<-paste0(url,i)
www<-read_html(url2)
node<-html_nodes(www,".click")
for(j in 1:length(node)){
aux<-xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]]
bd$url<-rbind(bd$url,aux)
}
for(j in 1:length(node)){
aux<-xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]]
bd$url<-c(bd$url,aux)
}
c(bd$url,aux)
bd<-rbind(bd,aux)
aux
aux<-as.string(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
aux<-as.character(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
bd<-rbind(bd,aux)
aux<-as.character(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
aux
str(aux)
######################
#scrape página: buscojobs (2031 trabajos a la fecha)
bd<-data.frame(url="")
url<-"https://www.buscojobs.com.bo/ofertas/"
i<-1
url2<-paste0(url,i)
www<-read_html(url2)
node<-html_nodes(www,".click")
for(j in 1:length(node)){
aux<-as.character(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
bd<-rbind(bd,aux)
}
bd
######################
#scrape página: buscojobs (2031 trabajos a la fecha)
bd<-data.frame(url="")
url<-"https://www.buscojobs.com.bo/ofertas/"
i<-1
url2<-paste0(url,i)
www<-read_html(url2)
node<-html_nodes(www,".click")
j<-i
j<-1
aux<-as.character(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
aux
######################
#scrape página: buscojobs (2031 trabajos a la fecha)
bd<-NULL
url<-"https://www.buscojobs.com.bo/ofertas/"
i<-1
url2<-paste0(url,i)
www<-read_html(url2)
node<-html_nodes(www,".click")
for(j in 1:length(node)){
aux<-as.character(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
bd<-c(bd,aux)
}
bd
i<-1
#for(i in 1:136){
url2<-paste0(url,i)
www<-read_html(url2)
node<-html_nodes(www,".click")
View(node)
xml_attrs(xml_child(xml_child(xml_child(node[[1]], 1), 1), 1))
xml_attrs(xml_child(xml_child(node[[1]], 1), 1))[["class"]]
node[[1]]
html_attrs(node[[1]])
html_attr(node[[1]],"class")
html_attr(node[[1]],"dic")
html_attr(node[[1]],"div")
html_attr(node[[1]],"href")
html_children(node)
html_children(node[[1]])
html_children(node[[1]][[1]])
html_children(node[[1]])
html_children(node[[1]])
html_name(node)
html_name(node[[1]])
html_tag(node)
html_structure(node)
######################
#Proyecto: OIM
#Objetivo: Scrape a páginas web de trabajo
#Autor: Alvaro Chirino
#fechas: Abril 24, 2020
######################
rm(list=ls())
setwd("C:\\Users\\ALVARO\\Documents\\GitHub\\OIM-text-mining\\data")
######################
library(rvest)
library(foreign)
library(dplyr)
######################
#scrape página: buscojobs (2031 trabajos a la fecha)
bd<-NULL
url<-"https://www.buscojobs.com.bo/ofertas/"
for(i in 1:136){
print(i)
url2<-paste0(url,i)
www<-read_html(url2)
node<-html_nodes(www,".click")
for(j in 1:length(node)){
aux<-as.character(xml_attrs(xml_child(xml_child(xml_child(xml_child(node[[j]], 1), 1), 1), 1))[["href"]])
bd<-c(bd,aux)
}
}
?save
save(bd,"buscojobs.RData")
save(bd,file="buscojobs.RData")
# al interior de los anuncios
bd
gsub("/","","//hola")
# al interior de los anuncios
gsub("//","",bd)
# al interior de los anuncios
bd<-gsub("//","",bd)
# al interior de los anuncios
i<-1
url(bd[1])
www1<-read_html(url(bd[1]))
bd
bd[1]
www1<-read_html(bd[1])
www1<-read_html(paste0(bd[1]))
load("buscojobs.RData")
bd
paste0("https:",bd)
bd<-paste0("https:",bd)
# al interior de los anuncios
i<-1
www1<-read_html(bd[1])
View(www1)
View(www1)
html_node(www1,".oferta-title")
html_nodes(www1,".oferta-title")
html_table(www1)
qq<-html_table(www1)
#destino
html_nodes(www1,".no-margin-top-md")
#destino
aux<-html_nodes(www1,".no-margin-top-md")
aux
html_children(aux)
html_attr(aux)
html_attrs(aux)
html_nodes(aux,".h2")
html_attr(aux,".h2")
View(aux)
View(aux)
html_nodes(aux)
html_node(aux)
html_attrs(aux)
html_structure(aux)
#destino
aux<-html_nodes(www1,".col-sm-12")
aux
html_text(aux)
aux
html_text(aux[4])
gsub(c("\n"),"", html_text(aux[4]))
gsub(c("\n","\t"),"", html_text(aux[4]))
gsub("\*","", html_text(aux[4]))
?gsub
gsub("\t","", html_text(aux[4]),fixed=T)
aux<-gsub("(\t)(\n)","", html_text(aux[4]),fixed=T)
#destino
aux<-html_nodes(www1,".col-sm-12")
gsub("(\t)(\n)","", html_text(aux[4]),fixed=T)
gsub("(\\t)(\\n)","", html_text(aux[4]),fixed=F)
gsub("\\t","", html_text(aux[4]),fixed=F)
gsub("\t","", html_text(aux[4]),fixed=T)
aux<-gsub("\t","", html_text(aux[4]),fixed=T)
aux<-gsub("\n","", html_text(aux[4]),fixed=T)
aux<-gsub("\n","", aux,fixed=T)
aux
#destino
aux<-html_nodes(www1,".col-sm-12")
dest<-gsub("\t","", html_text(aux[4]),fixed=T)
dest<-gsub("\n","", aux,fixed=T)
aux
#destino
aux<-html_nodes(www1,".col-sm-12")
grepl("Lugar:",aux)
grepl("Jornada:",aux)
grepl("Jornada",aux)
grepl("Lugar:",aux)
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
aux[pos]
dest<-gsub("\t","", html_text(aux[pos][1]),fixed=T)
dest
html_text(aux[pos][1])
html_text(aux[pos][1])
aux[pos]
html_text(aux[pos][2])
html_text(aux[pos][2])
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", aux,fixed=T)
dest
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
#texto
html_nodes(www1,"p")
#texto
html_nodes(www1,"p")[2]
#texto
html_text(html_nodes(www1,"p")[2])
i<-1
www1<-read_html(bd[1])
#titulo
html_nodes(www1,".oferta-title")
#titulo
html_nodes(www1,".oferta-title")[1]
#titulo
html_text(html_nodes(www1,".oferta-title")[1])
#titulo
html_text(html_nodes(www1,".oferta-title")[1])
#texto
html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
dest
i<-2
www1<-read_html(bd[i])
#titulo
html_text(html_nodes(www1,".oferta-title")[1])
#texto
html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
dest
i<-200
www1<-read_html(bd[i])
#titulo
html_text(html_nodes(www1,".oferta-title")[1])
#texto
html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
dest
# al interior de los anuncios
bd2<-data.frame(titulo=NULL,text=NULL,destino=NULL)
# al interior de los anuncios
bd2<-data.frame(titulo=NULL,text=NULL,destino=NULL)
bd2
# al interior de los anuncios
bd2<-data.frame(titulo=NULL,text=NULL,destino=NULL)
for(i in 1:10){
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
#texto
bd2$text[i]<-html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
bd2$destino[i]<-dest
}
# al interior de los anuncios
bd2<-data.frame(titulo="",text="",destino="")
for(i in 1:10){
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
#texto
bd2$text[i]<-html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
bd2$destino[i]<-dest
}
# al interior de los anuncios
bd2<-data.frame(titulo="",text="",destino="")
i<-1
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
#titulo
bd2$titulo[i]<-as.character(html_text(html_nodes(www1,".oferta-title")[1]))
bd
bd2
str(bd2)
?data.frame()
# al interior de los anuncios
bd2<-data.frame(titulo="",text="",destino="",stringsAsFactors = F)
bd2
str(bd2)
# al interior de los anuncios
bd2<-data.frame(titulo="",text="",destino="",stringsAsFactors = F)
i<-1
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
#texto
bd2$text[i]<-html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
bd2$destino[i]<-dest
bd2
View(bd2)
length(bd)
bd2<-data.frame(titulo="",text="",destino="",stringsAsFactors = F)
for(i in 1:length(bd)){
print(i)
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
#texto
bd2$text[i]<-html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
bd2$destino[i]<-dest
}
bd
bd2
bd2<-data.frame(titulo="",text="",destino="",stringsAsFactors = F)
for(i in 1:length(bd)){
print(i)
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
#texto
bd2$text[i]<-html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
bd2$destino[i]<-dest
}
bd2
print(i)
www1<-read_html(bd[i])
#titulo
bd2$titulo[i]<-html_text(html_nodes(www1,".oferta-title")[1])
html_text(html_nodes(www1,".oferta-title")[1])
bd2$titulo
bd2$titulo[2]<-2
bd2[i,1]<-html_text(html_nodes(www1,".oferta-title")[1])
bd2
bd2<-data.frame(titulo="",text="",destino="",stringsAsFactors = F)
for(i in 1:length(bd)){
print(i)
www1<-read_html(bd[i])
#titulo
bd2[i,1]<-html_text(html_nodes(www1,".oferta-title")[1])
#texto
bd2[i,2]<-html_text(html_nodes(www1,"p")[2])
#destino
aux<-html_nodes(www1,".col-sm-12")
pos<-grepl("Lugar:",aux)
dest<-gsub("\t","", html_text(aux[pos][2]),fixed=T)
dest<-gsub("\n","", dest,fixed=T)
bd2[i,3]<-dest
}
View(bd2)
